# 浏览器架构
## 浏览器架构演进
* 单进程架构：所有的模块运行在一个进程之中，包括网络-插件-Javascrip运行环境等。
* 多进程架构：主进程-网络进程-渲染进程-GPU进程-插件进程等。
* 面向服务架构：将原来的UI-数据库-文件-设备等作为独立的基础服务。  
![浏览器架构对比](image/d5/截图%202023-04-18%2014-20-31.png)

## 进程分工
- 主进程：负责页面逻辑，用户交互，紫禁城管理；包括地址栏，书签，前进，后退，收藏夹等
- GPU进程：负责UI绘制，包括整个浏览器全部UI
- 网络进程：负责网络资源加载
- **标签页（渲染进程）：控制tab内内容，将html，css，js转换为用户可交互网页** 
- 插件进程：控制插件
- 其他进程：程序Storage/Network/Audio Service等

# 渲染进程
![截图 2023-04-18 14-28-39](/home/nenosan/JueJinNote/image/d5/截图 2023-04-18 14-28-39.png)

### 渲染进程——多线程架构

内部是多线程实现，主要负责页面渲染，脚本执行，事件处理，网络请求等。

![内部实现](/home/nenosan/JueJinNote/image/d5/截图 2023-04-18 14-54-26.png)

![线程功能](/home/nenosan/JueJinNote/image/d5/截图 2023-04-18 14-55-49.png)

### JS引擎 VS 渲染引擎

JS引擎负责解析执行js，渲染引擎负责解析生成渲染树（HTML->DOM tree; CSS -> CSSOM tree）-> render tree，两者之间通过桥接方式通信

